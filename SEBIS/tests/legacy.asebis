; This fail contains QKVT assembly, not ASEMBIS so has differences,
; some instructions which do not exist,
; lacks some instructions which do exist,
; doesn't contain any binary 0b or hex 0x for constants just decimal,
; contains only 8 bit memory addresses which are no longer compatible


; This is the test ROM assembly language
; This is not meant to produce a valid output but test machine code generation
; This will most likely result in unpredictable execution if run

; 248: Bank A (lower bytes) - F8
; 249: Bank B - F9
; 250: Bank C - FA
; 251: Bank D - FB

; Data segment - no constants so memory is set at runtime in active memory bank
:data
JMP main

; Initialisation process (init label is required by ROM)
:init
JMP data

:main
LDA $00 ; Load data at 00 to register A
LDB $01 ; Load data at 01 to register B
ABC ; ABC A and B registers and store result in C
STA $01 ; Store value of A to 01 changing data
STB $00 ; Store value of B to 00 changing data
STC $02 ; Store the value
ABC 1 ; Subtracts B register from A

; Random instructions
NOP ; Do nothing

 CMP  ;  No flip compare
CMP  1 ; Flip compare result

 JNZ lab_one
 JZ    lab_two

:lab_one
JMP lab_three

:lab_two
JMP lab_three

 :lab_three
CPL ; A less than B
CPL 1 ; A more than B

; Logical
AND
OR
XOR

; Program kill
HLT